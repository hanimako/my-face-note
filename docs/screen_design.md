# 名前をおぼえる帳 画面設計書（MVP）

> **本書は最新版**（2025‑07‑16 時点）。旧仕様（右下 FAB／動的切替など）は完全に削除済です。

---

## 1. 画面・モーダル一覧

| ID   | 種別     | ラベル         | 概要                       |
| ---- | -------- | -------------- | -------------------------- |
| P‑01 | ページ   | ホーム（名簿） | 一覧・登録導線・クイズ導線 |
| M‑01 | モーダル | 新規登録       | 利用者情報を登録           |
| M‑02 | モーダル | 編集           | 既存利用者を編集／削除     |
| P‑02 | ページ   | 名前当てクイズ | 顔 ⇄ 名前 4 択テスト       |
| S‑01 | シート   | クイズ設定     | 出題モード・自動昇格設定   |

---

## 2. 画面詳細

### P‑01  ホーム（名簿）

| 要素               | 内容                                                                                                                               |
| ------------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| **ヘッダー**       | 小ロゴ _名前をおぼえる帳_（左寄せ）                                                                                                |
| **アクション行**   | ボタン **📋 名前当てクイズ**（`disabled` when `unmemorizedCount === 0`）をタイトル直下センター配置                                 |
| **フィルター**     | 未記憶のみチェックボックス・所属ドロップダウン（`totalCount > 0` で表示）                                                          |
| **カードグリッド** | 2×2 グリッド（レスポンシブ対応）<br>各カード：写真・氏名・所属・メモ・記憶状態ピル・編集ボタン<br>追加カード（＋）は常に最初に表示 |
| **記憶状態ピル**   | クリック可能な状態表示<br>未挑戦（グレー）→ 学習中（オレンジ）→ 覚えた（緑）→ 未挑戦（循環）                                       |
| **初回起動シート** | 全データが 0 件の場合のみ表示<br>アプリ説明・プライバシー情報・開始ボタン                                                          |

### P‑02  名前当てクイズ

| 要素           | 内容                                                                                                                                                                                                                                                                |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ヘッダー       | ← 戻る／タイトル「名前をおぼえる帳」                                                                                                                                                                                                                                |
| 設定ボタン     | ヘッダーと問題エリアの間に右揃えで配置<br>角まるボタン「⚙ クイズ設定」                                                                                                                                                                                              |
| 問題エリア     | 顔写真（120 px）**or** 氏名テキスト（モード依存）                                                                                                                                                                                                                   |
| 選択肢         | 4 択グリッド 2×2／氏名のみを表示（所属は表示しない）／押下で正誤判定・ランダム並べ替え<br>ダミー選択肢は「No Image」を矩形で囲んでグレーで表示                                                                                                                      |
| フィードバック | **インライン方式 (案 D)**："次の問題 ▶" ボタンが押下時に `bg-green-500`（正解）／`bg-red-500`（不正解）へ変色し、ラベルを「正解！」「不正解…」に置き換える。ユーザーがボタンをタップすると色とテキストが元に戻り、次問読み込み。追加のトースト/バナーは使用しない。 |

**出題ロジック**
| 利用者数 | 出題数 | 4 択構成 |
|----------|--------|---------|
| 1 | 1 | 正解 1 + ダミー 3 |
| 2 | 2 | 正解 1 + もう 1 人 + ダミー 2 |
| 3 | 3 | 正解 1 + 残り 2 人 + ダミー 1 |
| ≥4 | 利用者数 | 正解 1 + 不正解 3 (利用者プール) |

ダミー氏名：佐藤太郎, 鈴木花子, 高橋健, 田中美咲（固定）

---

### S‑01  クイズ設定シート

- モバイル：BottomSheet (`bottom-0 w-full`)
- PC：SideSheet (`right-0 w-80 h-full`)
- 出題モード：顔 → 名前／名前 → 顔
- 自動昇格設定：OFF／2 連続正解／3 連続正解／4 連続正解

---

## 3. 共通仕様

- **カード 0 件**：フィルタ非表示＆中央ガイダンス＆＋カードのみ
- **IndexedDB エラーハンドリング**：書込み失敗時に Toast 表示し入力保持。
- **PWA 更新**：`skipWaiting()` で自動更新。バナーなし。

---
